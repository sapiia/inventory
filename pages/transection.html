<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Order Management System</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome for icons -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <style>
        .sidebar-active {
            @apply bg-purple-700 text-white;
        }

        .status-badge {
            @apply px-3 py-1 rounded-full text-xs font-semibold;
        }

        .modal-overlay {
            backdrop-filter: blur(4px);
        }

        .table-hover:hover {
            transform: translateY(-2px);
            transition: all 0.2s ease;
        }

        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .card-shadow {
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .btn-primary {
            @apply bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-3 px-6 rounded-lg shadow-lg transform hover:scale-105 transition-all duration-200;
        }

        .btn-secondary {
            @apply bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-all duration-200;
        }

        .input-field {
            @apply w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all duration-200;
        }

        .textarea-field {
            @apply w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-200 transition-all duration-200 resize-none;
        }
    </style>
</head>

<body class="bg-gray-100 font-sans">

    <div class="flex h-screen overflow-hidden">
        <!-- Sidebar -->
        <aside class="w-64 bg-gradient-to-b from-purple-800 to-purple-900 text-white flex flex-col">
            <div class="p-6 text-center border-b border-purple-700">
                <h1 class="text-2xl font-bold">Inventory System</h1>
            </div>
            <nav class="flex-1 p-4">
                <ul class="space-y-2">
                    <li><a href="../index.html" class="w-full text-left py-3 px-4 rounded-lg hover:bg-purple-700 flex items-center gap-3 block"><i class="fas fa-home"></i> Dashboard</a></li>
                    <li><a href="../index.html#items" class="w-full text-left py-3 px-4 rounded-lg hover:bg-purple-700 flex items-center gap-3 block"><i class="fas fa-boxes"></i> Items</a></li>
                    <li><button id="nav-transactions" class="w-full text-left py-3 px-4 rounded-lg sidebar-active flex items-center gap-3"><i class="fas fa-exchange-alt"></i> Transactions</button></li>
                </ul>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto bg-gradient-to-br from-purple-50 to-blue-50 p-8">
            <div class="space-y-8">
                <!-- Header Section -->
                <div class="mb-8">
                    <div class="flex items-center justify-between">
                        <div>
                            <h1 class="text-4xl font-bold text-transparent bg-clip-text gradient-bg mb-2">
                                <i class="fas fa-shopping-cart mr-3"></i>Order Management System
                            </h1>
                            <p class="text-gray-600 text-lg">Create, manage, and track all your orders efficiently</p>
                        </div>
                        <button onclick="openCreateOrderModal()" class="btn-primary">
                            <i class="fas fa-plus-circle mr-2"></i>Create New Order
                        </button>
                    </div>
                </div>

                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-purple-500 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Total Orders</p>
                                <p class="text-3xl font-bold text-purple-600" id="total-orders">0</p>
                            </div>
                            <div class="bg-purple-100 p-4 rounded-full">
                                <i class="fas fa-shopping-bag text-purple-600 text-2xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-green-500 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Completed</p>
                                <p class="text-3xl font-bold text-green-600" id="completed-orders">0</p>
                            </div>
                            <div class="bg-green-100 p-4 rounded-full">
                                <i class="fas fa-check-circle text-green-600 text-2xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-yellow-500 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Pending</p>
                                <p class="text-3xl font-bold text-yellow-600" id="pending-orders">0</p>
                            </div>
                            <div class="bg-yellow-100 p-4 rounded-full">
                                <i class="fas fa-clock text-yellow-600 text-2xl"></i>
                            </div>
                        </div>
                    </div>

                    <div class="bg-white rounded-xl shadow-lg p-6 border-l-4 border-blue-500 card-shadow">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-500 text-sm font-medium">Processing</p>
                                <p class="text-3xl font-bold text-blue-600" id="processing-orders">0</p>
                            </div>
                            <div class="bg-blue-100 p-4 rounded-full">
                                <i class="fas fa-spinner text-blue-600 text-2xl"></i>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Orders Table -->
                <div class="bg-white rounded-2xl shadow-2xl overflow-hidden card-shadow">
            <div class="bg-gradient-to-r from-purple-600 to-blue-600 px-8 py-6">
                <h2 class="text-2xl font-bold text-white flex items-center">
                    <i class="fas fa-list-alt mr-3"></i>All Orders
                </h2>
            </div>

            <div class="overflow-x-auto">
                <table class="w-full">
                    <thead class="bg-gray-50 border-b-2 border-gray-200">
                        <tr>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Order ID</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Date</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Image</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Item</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Type</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Quantity</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                User</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Status</th>
                            <th class="px-6 py-4 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Description</th>
                            <th class="px-6 py-4 text-center text-xs font-bold text-gray-700 uppercase tracking-wider">
                                Actions</th>
                        </tr>
                    </thead>
                    <tbody id="orders-table-body" class="divide-y divide-gray-200">
                        <!-- Orders will be rendered here -->
                    </tbody>
                </table>
            </div>

            <!-- Empty State -->
            <div id="empty-state" class="hidden text-center py-16">
                <i class="fas fa-inbox text-gray-300 text-6xl mb-4"></i>
                <p class="text-gray-500 text-xl font-medium">No orders yet</p>
                <p class="text-gray-400 mt-2">Create your first order to get started</p>
            </div>
        </div>
            </div>
        </main>
    </div>

    <!-- Modal for Create/Edit Order -->
    <div id="order-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-50 modal-overlay flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto">
            <div class="gradient-bg px-8 py-6 rounded-t-2xl">
                <h3 id="modal-title" class="text-3xl font-bold text-white flex items-center">
                    <i class="fas fa-edit mr-3"></i>Create New Order
                </h3>
            </div>

            <form id="order-form" class="p-8">
                <input type="hidden" id="edit-order-id">

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <!-- Item Name -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-box mr-2 text-purple-600"></i>Item Name
                        </label>
                        <input type="text" id="order-item" placeholder="Enter item name" required class="input-field">
                    </div>

                    <!-- Item Image URL -->
                    <div class="md:col-span-2">
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-image mr-2 text-purple-600"></i>Item Image URL
                        </label>
                        <input type="url" id="order-image" placeholder="https://example.com/image.jpg" class="input-field" oninput="previewImage()">
                        <div class="flex items-start gap-2 mt-1">
                            <p class="text-xs text-gray-500 flex-1">Paste an image URL or leave blank for default icon</p>
                            <button type="button" onclick="showSampleImages()" class="text-xs text-purple-600 hover:text-purple-800 font-semibold">
                                <i class="fas fa-lightbulb mr-1"></i>Sample URLs
                            </button>
                        </div>

                        <!-- Sample Images Dropdown -->
                        <div id="sample-images" class="hidden mt-2 p-3 bg-purple-50 rounded-lg border border-purple-200">
                            <p class="text-xs font-semibold text-gray-700 mb-2">Click to use sample image:</p>
                            <div class="grid grid-cols-3 gap-2">
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1494976388531-d1058494cdd8?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-car text-purple-600"></i> Car
                                </button>
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-headphones text-purple-600"></i> Headphones
                                </button>
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-watch text-purple-600"></i> Watch
                                </button>
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1588872657578-7efd1f1555ed?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-laptop text-purple-600"></i> Laptop
                                </button>
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-sun text-purple-600"></i> Sunglasses
                                </button>
                                <button type="button" onclick="useSampleImage('https://images.unsplash.com/photo-1542291026-7eec264c27ff?w=400')" class="text-xs bg-white hover:bg-purple-100 p-2 rounded border text-left">
                                    <i class="fas fa-shoe-prints text-purple-600"></i> Shoes
                                </button>
                            </div>
                        </div>

                        <!-- Image Preview -->
                        <div id="image-preview-container" class="mt-3 hidden">
                            <p class="text-sm text-gray-600 mb-2">Preview:</p>
                            <img id="image-preview" src="" alt="Preview" class="w-32 h-32 object-cover rounded-lg shadow-md border-2 border-purple-200" onerror="this.parentElement.classList.add('hidden')">
                        </div>
                    </div>

                    <!-- Order Type -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-exchange-alt mr-2 text-purple-600"></i>Order Type
                        </label>
                        <select id="order-type" required class="input-field">
                            <option value="">Select type</option>
                            <option value="Stock In">Stock In</option>
                            <option value="Stock Out">Stock Out</option>
                            <option value="Transfer">Transfer</option>
                            <option value="Return">Return</option>
                        </select>
                    </div>

                    <!-- Quantity -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-sort-numeric-up mr-2 text-purple-600"></i>Quantity
                        </label>
                        <input type="number" id="order-quantity" placeholder="Enter quantity" min="1" required
                            class="input-field">
                    </div>

                    <!-- User -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-user mr-2 text-purple-600"></i>User
                        </label>
                        <input type="text" id="order-user" placeholder="Enter user name" required class="input-field">
                    </div>

                    <!-- Status -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-flag mr-2 text-purple-600"></i>Status
                        </label>
                        <select id="order-status" required class="input-field">
                            <option value="">Select status</option>
                            <option value="Pending">Pending</option>
                            <option value="Processing">Processing</option>
                            <option value="Completed">Completed</option>
                            <option value="Cancelled">Cancelled</option>
                        </select>
                    </div>

                    <!-- Date -->
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">
                            <i class="fas fa-calendar mr-2 text-purple-600"></i>Date
                        </label>
                        <input type="date" id="order-date" required class="input-field">
                    </div>
                </div>

                <!-- Description -->
                <div class="mt-6">
                    <label class="block text-gray-700 font-semibold mb-2">
                        <i class="fas fa-align-left mr-2 text-purple-600"></i>Description
                    </label>
                    <textarea id="order-description" placeholder="Enter order description or notes..." rows="4"
                        class="textarea-field"></textarea>
                </div>

                <!-- Action Buttons -->
                <div class="flex justify-end gap-4 mt-8">
                    <button type="button" onclick="closeOrderModal()" class="btn-secondary">
                        <i class="fas fa-times mr-2"></i>Cancel
                    </button>
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-save mr-2"></i>Save Order
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- View Order Details Modal -->
    <div id="view-order-modal"
        class="hidden fixed inset-0 bg-black bg-opacity-50 modal-overlay flex items-center justify-center z-50 p-4">
        <div class="bg-white rounded-2xl shadow-2xl w-full max-w-2xl">
            <div class="gradient-bg px-8 py-6 rounded-t-2xl">
                <h3 class="text-3xl font-bold text-white flex items-center">
                    <i class="fas fa-info-circle mr-3"></i>Order Details
                </h3>
            </div>

            <div id="order-details-content" class="p-8">
                <!-- Order details will be rendered here -->
            </div>

            <div class="px-8 pb-8">
                <button onclick="closeViewOrderModal()" class="btn-secondary w-full">
                    <i class="fas fa-times mr-2"></i>Close
                </button>
            </div>
        </div>
    </div>

    <script>
        // Data storage
        let orders = JSON.parse(localStorage.getItem('inventoryOrders')) || [];
        let nextOrderId = orders.length ? Math.max(...orders.map(o => o.id)) + 1 : 1001;

        // Initialize
        document.addEventListener('DOMContentLoaded', () => {
            // Set today's date as default
            document.getElementById('order-date').valueAsDate = new Date();
            renderOrdersTable();
            updateStats();
        });

        // Open Create Order Modal
        function openCreateOrderModal() {
            document.getElementById('modal-title').innerHTML = '<i class="fas fa-plus-circle mr-3"></i>Create New Order';
            document.getElementById('order-form').reset();
            document.getElementById('edit-order-id').value = '';
            document.getElementById('order-date').valueAsDate = new Date();
            document.getElementById('order-modal').classList.remove('hidden');
        }

        // Close Order Modal
        function closeOrderModal() {
            document.getElementById('order-modal').classList.add('hidden');
            document.getElementById('image-preview-container').classList.add('hidden');
        }

        // Preview Image
        function previewImage() {
            const imageUrl = document.getElementById('order-image').value;
            const preview = document.getElementById('image-preview');
            const container = document.getElementById('image-preview-container');

            if (imageUrl) {
                preview.src = imageUrl;
                container.classList.remove('hidden');
            } else {
                container.classList.add('hidden');
            }
        }

        // Show Sample Images
        function showSampleImages() {
            const sampleDiv = document.getElementById('sample-images');
            sampleDiv.classList.toggle('hidden');
        }

        // Use Sample Image
        function useSampleImage(url) {
            document.getElementById('order-image').value = url;
            previewImage();
            document.getElementById('sample-images').classList.add('hidden');
        }

        // Close View Order Modal
        function closeViewOrderModal() {
            document.getElementById('view-order-modal').classList.add('hidden');
        }

        // Save Order (Create or Update)
        document.getElementById('order-form').addEventListener('submit', (e) => {
            e.preventDefault();

            const editId = document.getElementById('edit-order-id').value;
            const orderData = {
                id: editId ? parseInt(editId) : nextOrderId++,
                date: document.getElementById('order-date').value,
                item: document.getElementById('order-item').value,
                image: document.getElementById('order-image').value || '',
                type: document.getElementById('order-type').value,
                quantity: parseInt(document.getElementById('order-quantity').value),
                user: document.getElementById('order-user').value,
                status: document.getElementById('order-status').value,
                description: document.getElementById('order-description').value,
                createdAt: editId ? orders.find(o => o.id === parseInt(editId))?.createdAt : new Date().toISOString(),
                updatedAt: new Date().toISOString()
            };

            if (editId) {
                // Update existing order
                const index = orders.findIndex(o => o.id === parseInt(editId));
                if (index > -1) {
                    orders[index] = orderData;
                }
            } else {
                // Create new order
                orders.push(orderData);
            }

            saveOrders();
            closeOrderModal();
            renderOrdersTable();
            updateStats();

            // Show success message
            showNotification(editId ? 'Order updated successfully!' : 'Order created successfully!', 'success');
        });

        // Edit Order
        function editOrder(id) {
            const order = orders.find(o => o.id === id);
            if (!order) return;

            document.getElementById('modal-title').innerHTML = '<i class="fas fa-edit mr-3"></i>Edit Order';
            document.getElementById('edit-order-id').value = order.id;
            document.getElementById('order-date').value = order.date;
            document.getElementById('order-item').value = order.item;
            document.getElementById('order-image').value = order.image || '';
            document.getElementById('order-type').value = order.type;
            document.getElementById('order-quantity').value = order.quantity;
            document.getElementById('order-user').value = order.user;
            document.getElementById('order-status').value = order.status;
            document.getElementById('order-description').value = order.description || '';
            document.getElementById('order-modal').classList.remove('hidden');
        }

        // Delete Order
        function deleteOrder(id) {
            if (!confirm('Are you sure you want to delete this order? This action cannot be undone.')) return;

            orders = orders.filter(o => o.id !== id);
            saveOrders();
            renderOrdersTable();
            updateStats();
            showNotification('Order deleted successfully!', 'error');
        }

        // View Order Details
        function viewOrder(id) {
            const order = orders.find(o => o.id === id);
            if (!order) return;

            const statusColors = {
                'Pending': 'bg-yellow-100 text-yellow-800 border-yellow-300',
                'Processing': 'bg-blue-100 text-blue-800 border-blue-300',
                'Completed': 'bg-green-100 text-green-800 border-green-300',
                'Cancelled': 'bg-red-100 text-red-800 border-red-300'
            };

            const typeColors = {
                'Stock In': 'bg-green-100 text-green-800',
                'Stock Out': 'bg-red-100 text-red-800',
                'Transfer': 'bg-blue-100 text-blue-800',
                'Return': 'bg-orange-100 text-orange-800'
            };

            const content = `
                <div class="space-y-6">
                    ${order.image ? `
                    <div class="flex justify-center mb-4">
                        <img src="${order.image}" alt="${order.item}" class="w-48 h-48 object-cover rounded-lg shadow-lg border-4 border-purple-200" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                        <div class="w-48 h-48 bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg shadow-lg border-4 border-purple-200 flex items-center justify-center" style="display:none;">
                            <i class="fas fa-image text-6xl text-purple-300"></i>
                        </div>
                    </div>
                    ` : ''}

                    <div class="grid grid-cols-2 gap-6">
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-sm text-gray-600 mb-1">Order ID</p>
                            <p class="text-xl font-bold text-purple-600">#${order.id}</p>
                        </div>
                        <div class="bg-gray-50 p-4 rounded-lg">
                            <p class="text-sm text-gray-600 mb-1">Date</p>
                            <p class="text-xl font-bold text-gray-800">${formatDate(order.date)}</p>
                        </div>
                    </div>

                    <div class="border-t pt-4">
                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-gray-600 mb-1"><i class="fas fa-box mr-2"></i>Item</p>
                                <p class="text-lg font-semibold text-gray-800">${order.item}</p>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 mb-1"><i class="fas fa-sort-numeric-up mr-2"></i>Quantity</p>
                                <p class="text-lg font-semibold text-gray-800">${order.quantity}</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-2 gap-4 mb-4">
                            <div>
                                <p class="text-sm text-gray-600 mb-1"><i class="fas fa-exchange-alt mr-2"></i>Type</p>
                                <span class="status-badge ${typeColors[order.type] || 'bg-gray-100 text-gray-800'}">${order.type}</span>
                            </div>
                            <div>
                                <p class="text-sm text-gray-600 mb-1"><i class="fas fa-flag mr-2"></i>Status</p>
                                <span class="status-badge border-2 ${statusColors[order.status] || 'bg-gray-100 text-gray-800'}">${order.status}</span>
                            </div>
                        </div>

                        <div class="mb-4">
                            <p class="text-sm text-gray-600 mb-1"><i class="fas fa-user mr-2"></i>User</p>
                            <p class="text-lg font-semibold text-gray-800">${order.user}</p>
                        </div>

                        ${order.description ? `
                        <div class="bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500">
                            <p class="text-sm text-gray-600 mb-2"><i class="fas fa-align-left mr-2"></i>Description</p>
                            <p class="text-gray-800">${order.description}</p>
                        </div>
                        ` : ''}
                    </div>

                    <div class="border-t pt-4 text-xs text-gray-500">
                        <p><i class="fas fa-clock mr-2"></i>Created: ${new Date(order.createdAt).toLocaleString()}</p>
                        ${order.updatedAt ? `<p class="mt-1"><i class="fas fa-sync mr-2"></i>Last Updated: ${new Date(order.updatedAt).toLocaleString()}</p>` : ''}
                    </div>
                </div>
            `;

            document.getElementById('order-details-content').innerHTML = content;
            document.getElementById('view-order-modal').classList.remove('hidden');
        }

        // Render Orders Table
        function renderOrdersTable() {
            const tbody = document.getElementById('orders-table-body');
            const emptyState = document.getElementById('empty-state');

            if (orders.length === 0) {
                tbody.innerHTML = '';
                emptyState.classList.remove('hidden');
                return;
            }

            emptyState.classList.add('hidden');
            tbody.innerHTML = '';

            const statusColors = {
                'Pending': 'bg-yellow-100 text-yellow-800 border-yellow-300',
                'Processing': 'bg-blue-100 text-blue-800 border-blue-300',
                'Completed': 'bg-green-100 text-green-800 border-green-300',
                'Cancelled': 'bg-red-100 text-red-800 border-red-300'
            };

            const typeColors = {
                'Stock In': 'bg-green-100 text-green-800',
                'Stock Out': 'bg-red-100 text-red-800',
                'Transfer': 'bg-blue-100 text-blue-800',
                'Return': 'bg-orange-100 text-orange-800'
            };

            orders.slice().reverse().forEach(order => {
                const tr = document.createElement('tr');
                tr.className = 'hover:bg-purple-50 table-hover';

                // Create image element
                const imageHtml = order.image
                    ? `<img src="${order.image}" alt="${order.item}" class="w-16 h-16 object-cover rounded-lg shadow-md border-2 border-purple-200" onerror="this.style.display='none'; this.nextElementSibling.style.display='flex';">
                       <div class="w-16 h-16 bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg flex items-center justify-center border-2 border-purple-200" style="display:none;">
                           <i class="fas fa-image text-2xl text-purple-400"></i>
                       </div>`
                    : `<div class="w-16 h-16 bg-gradient-to-br from-purple-100 to-blue-100 rounded-lg flex items-center justify-center border-2 border-purple-200">
                           <i class="fas fa-box text-2xl text-purple-400"></i>
                       </div>`;

                tr.innerHTML = `
                    <td class="px-6 py-4">
                        <span class="font-bold text-purple-600">#${order.id}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-700">${formatDate(order.date)}</td>
                    <td class="px-6 py-4">
                        ${imageHtml}
                    </td>
                    <td class="px-6 py-4">
                        <span class="font-semibold text-gray-800">${order.item}</span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="status-badge ${typeColors[order.type] || 'bg-gray-100 text-gray-800'}">
                            ${order.type}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <span class="font-semibold text-gray-800">${order.quantity}</span>
                    </td>
                    <td class="px-6 py-4 text-gray-700">
                        <i class="fas fa-user text-purple-500 mr-1"></i>${order.user}
                    </td>
                    <td class="px-6 py-4">
                        <span class="status-badge border-2 ${statusColors[order.status] || 'bg-gray-100 text-gray-800'}">
                            ${order.status}
                        </span>
                    </td>
                    <td class="px-6 py-4">
                        <div class="max-w-xs truncate text-gray-600" title="${order.description || 'No description'}">
                            ${order.description || '<span class="text-gray-400 italic">No description</span>'}
                        </div>
                    </td>
                    <td class="px-6 py-4">
                        <div class="flex items-center justify-center gap-2">
                            <button onclick="viewOrder(${order.id})" class="text-purple-600 hover:text-purple-800 hover:bg-purple-100 p-2 rounded-lg transition-all" title="View Details">
                                <i class="fas fa-eye"></i>
                            </button>
                            <button onclick="editOrder(${order.id})" class="text-blue-600 hover:text-blue-800 hover:bg-blue-100 p-2 rounded-lg transition-all" title="Edit">
                                <i class="fas fa-edit"></i>
                            </button>
                            <button onclick="deleteOrder(${order.id})" class="text-red-600 hover:text-red-800 hover:bg-red-100 p-2 rounded-lg transition-all" title="Delete">
                                <i class="fas fa-trash-alt"></i>
                            </button>
                        </div>
                    </td>
                `;
                tbody.appendChild(tr);
            });
        }

        // Update Statistics
        function updateStats() {
            document.getElementById('total-orders').textContent = orders.length;
            document.getElementById('completed-orders').textContent = orders.filter(o => o.status === 'Completed').length;
            document.getElementById('pending-orders').textContent = orders.filter(o => o.status === 'Pending').length;
            document.getElementById('processing-orders').textContent = orders.filter(o => o.status === 'Processing').length;
        }

        // Save to localStorage
        function saveOrders() {
            localStorage.setItem('inventoryOrders', JSON.stringify(orders));
        }

        // Format Date
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' });
        }

        // Show Notification
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';

            notification.className = `fixed top-4 right-4 ${bgColor} text-white px-6 py-4 rounded-lg shadow-2xl z-50 transform transition-all duration-300 flex items-center gap-3`;
            notification.innerHTML = `
                <i class="fas fa-${type === 'success' ? 'check-circle' : type === 'error' ? 'exclamation-circle' : 'info-circle'} text-xl"></i>
                <span class="font-semibold">${message}</span>
            `;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateX(100%)';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Close modals on outside click
        document.getElementById('order-modal').addEventListener('click', (e) => {
            if (e.target.id === 'order-modal') closeOrderModal();
        });

        document.getElementById('view-order-modal').addEventListener('click', (e) => {
            if (e.target.id === 'view-order-modal') closeViewOrderModal();
        });

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                closeOrderModal();
                closeViewOrderModal();
            }
        });
    </script>

</body>

</html>